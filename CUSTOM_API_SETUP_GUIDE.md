# 🔧 Guia de Configuração da API Personalizada - J.A.R.V.I.S\n\n## 📋 Visão Geral\n\nO J.A.R.V.I.S está atualmente configurado para usar APIs padrão, mas você pode facilmente configurá-lo para usar **sua própria API personalizada**. Este guia mostra 3 métodos diferentes para fazer essa configuração.\n\n## 🎯 APIs Atuais Configuradas\n\n### 🌐 GitHub Pages\n```javascript\nconst API_URL = 'https://jarvis-api-joao-manoel.onrender.com'\n```\n\n### 🔧 Padrão (Fallback)\n```javascript\nconst DEFAULT_API_URL = 'https://jarvis-tdgt.onrender.com'\n```\n\n## 🛠️ Método 1: Configurador Visual (Recomendado)\n\n### 📱 Interface Amigável\nUse o configurador visual para uma experiência guiada:\n\n```bash\n# Abra no navegador:\nopen configure_custom_api.html\n```\n\n### ✨ Funcionalidades\n- ✅ **Interface visual** com passos guiados\n- ✅ **Teste automático** da API\n- ✅ **Validação de URL** em tempo real\n- ✅ **Aplicação automática** da configuração\n- ✅ **Suporte a múltiplos provedores** (Render, Vercel, Heroku, Custom)\n\n### 🎮 Como Usar\n1. **Abra** `configure_custom_api.html` no navegador\n2. **Selecione** o tipo da sua API\n3. **Digite** a URL da sua API\n4. **Teste** a conexão\n5. **Aplique** a configuração\n\n## 🛠️ Método 2: Script Automático\n\n### ⚡ Configuração Rápida\nUse o script para configuração via terminal:\n\n```bash\n# Execute o script\n./setup_custom_api.sh\n```\n\n### 🎯 Opções Disponíveis\n1. **🌐 Render.com** (*.onrender.com)\n2. **▲ Vercel** (*.vercel.app)\n3. **🟣 Heroku** (*.herokuapp.com)\n4. **🔧 URL personalizada**\n5. **📝 Mostrar configuração atual**\n6. **🔄 Restaurar padrão**\n\n### 🚀 Funcionalidades\n- ✅ **Teste de conectividade** automático\n- ✅ **Backup automático** do arquivo original\n- ✅ **Commit e push** opcionais\n- ✅ **Validação de URL**\n- ✅ **Rollback fácil**\n\n## 🛠️ Método 3: Configuração Manual\n\n### 📝 Edição Direta do Código\n\n#### 1. Editar `www/main-github-pages.js`\n\n**Localizar as linhas:**\n```javascript\n// Linha ~6\nconst API_URL = isGitHubPages ? \n    'https://jarvis-api-joao-manoel.onrender.com' : // URL da API no Render\n    'http://localhost:8000'; // URL local para desenvolvimento\n\n// Linha ~280\nconst DEFAULT_API_URL = 'https://jarvis-tdgt.onrender.com';\n```\n\n**Substituir por:**\n```javascript\n// Linha ~6\nconst API_URL = isGitHubPages ? \n    'https://SUA-API-PERSONALIZADA.com' : // SUA API PERSONALIZADA\n    'http://localhost:8000'; // URL local para desenvolvimento\n\n// Linha ~280\nconst DEFAULT_API_URL = 'https://SUA-API-PERSONALIZADA.com';\n```\n\n#### 2. Fazer Commit e Push\n```bash\ngit add www/main-github-pages.js\ngit commit -m \"🔧 Configure custom API: https://SUA-API-PERSONALIZADA.com\"\ngit push origin main\n```\n\n## 🧪 Testando Sua API\n\n### 📡 Endpoints Necessários\n\nSua API deve ter pelo menos estes endpoints:\n\n#### 1. **POST /command** (Obrigatório)\n```javascript\n// Request\n{\n    \"message\": \"Olá Jarvis\"\n}\n\n// Response\n{\n    \"reply\": \"Olá! Como posso ajudá-lo?\"\n}\n```\n\n#### 2. **GET /health** (Opcional)\n```javascript\n// Response\n{\n    \"status\": \"ok\",\n    \"timestamp\": \"2024-01-01T12:00:00Z\"\n}\n```\n\n### 🔍 Teste Manual\n\n#### Via cURL\n```bash\n# Testar health\ncurl https://sua-api.com/health\n\n# Testar comando\ncurl -X POST https://sua-api.com/command \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"message\": \"Olá Jarvis\"}'\n```\n\n#### Via JavaScript (Console do Navegador)\n```javascript\n// Testar no console do navegador\nfetch('https://sua-api.com/command', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ message: 'Olá Jarvis' })\n})\n.then(r => r.json())\n.then(data => console.log('Resposta:', data));\n```\n\n## ⚙️ Configuração Dinâmica (Sem Código)\n\n### 🎛️ Via Interface do J.A.R.V.I.S\n\n1. **Acesse** o J.A.R.V.I.S no navegador\n2. **Clique** no botão de configurações ⚙️\n3. **Escolha** \"🔧 Configurar URL da API\"\n4. **Digite** a URL da sua API\n5. **Confirme** a configuração\n\n### 💾 Via Console do Navegador\n\n```javascript\n// Configurar temporariamente\nlocalStorage.setItem('FRONT_API_URL', 'https://sua-api.com');\nalert('✅ API configurada!');\nlocation.reload();\n\n// Verificar configuração atual\nconsole.log('API atual:', localStorage.getItem('FRONT_API_URL'));\n\n// Remover configuração personalizada\nlocalStorage.removeItem('FRONT_API_URL');\nlocation.reload();\n```\n\n## 🔒 Configurações de Segurança\n\n### 🛡️ CORS (Cross-Origin Resource Sharing)\n\nSua API deve permitir requisições do GitHub Pages:\n\n```javascript\n// Exemplo para Express.js\napp.use(cors({\n    origin: [\n        'https://joaomanoel123.github.io',\n        'http://localhost:3000' // Para desenvolvimento\n    ]\n}));\n```\n\n### 🔐 HTTPS\n\n- ✅ **Recomendado**: Use sempre HTTPS em produção\n- ⚠️ **HTTP**: Pode funcionar mas não é seguro\n- 🚫 **Mixed Content**: GitHub Pages (HTTPS) + API (HTTP) pode ser bloqueado\n\n## 🐛 Solução de Problemas\n\n### ❌ Erro: \"Failed to fetch\"\n\n**Causas possíveis:**\n- URL incorreta\n- API não está rodando\n- Problemas de CORS\n- Bloqueio de mixed content (HTTPS → HTTP)\n\n**Soluções:**\n1. Verificar se a API está acessível\n2. Configurar CORS corretamente\n3. Usar HTTPS na API\n4. Testar com cURL primeiro\n\n### ❌ Erro: \"Resposta inválida da API\"\n\n**Causas possíveis:**\n- Formato de resposta incorreto\n- Endpoint /command não existe\n- API retorna HTML em vez de JSON\n\n**Soluções:**\n1. Verificar formato da resposta\n2. Implementar endpoint /command\n3. Retornar JSON válido\n\n### ❌ Erro: \"CORS policy\"\n\n**Solução:**\n```javascript\n// Adicionar na sua API\nres.header('Access-Control-Allow-Origin', 'https://joaomanoel123.github.io');\nres.header('Access-Control-Allow-Methods', 'GET, POST, OPTIONS');\nres.header('Access-Control-Allow-Headers', 'Content-Type');\n```\n\n## 📊 Monitoramento\n\n### 🔍 Logs do J.A.R.V.I.S\n\nAbra o console do navegador (F12) para ver:\n\n```\n🤖 Jarvis iniciando...\n🌐 Modo: GitHub Pages\n🔗 API URL: https://sua-api.com\n📤 Enviando mensagem: Olá Jarvis\n📥 Resposta da API: 200 OK\n✅ Resposta processada com sucesso\n```\n\n### 📈 Teste de Performance\n\n```javascript\n// Medir tempo de resposta\nconst start = Date.now();\nfetch('https://sua-api.com/command', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ message: 'teste' })\n})\n.then(r => r.json())\n.then(data => {\n    const time = Date.now() - start;\n    console.log(`⏱️ Tempo de resposta: ${time}ms`);\n});\n```\n\n## 🔄 Rollback (Reverter Mudanças)\n\n### 📁 Via Backup (Script)\n```bash\n# Se usou o script, há um backup automático\ncp www/main-github-pages.js.backup www/main-github-pages.js\ngit add www/main-github-pages.js\ngit commit -m \"🔄 Revert to original API configuration\"\ngit push origin main\n```\n\n### 🔧 Via Git\n```bash\n# Reverter último commit\ngit revert HEAD\ngit push origin main\n\n# Ou resetar para commit específico\ngit reset --hard COMMIT_HASH\ngit push --force-with-lease origin main\n```\n\n### 💾 Via Interface\n1. Acesse configurações do J.A.R.V.I.S\n2. Configure URL da API\n3. Deixe vazio para usar padrão\n4. Ou digite: `https://jarvis-tdgt.onrender.com`\n\n## 📋 Checklist de Configuração\n\n### ✅ Antes de Configurar\n- [ ] API está rodando e acessível\n- [ ] Endpoint `/command` implementado\n- [ ] CORS configurado para GitHub Pages\n- [ ] HTTPS configurado (recomendado)\n- [ ] Testado com cURL ou Postman\n\n### ✅ Após Configurar\n- [ ] J.A.R.V.I.S carrega sem erros\n- [ ] Comandos de texto funcionam\n- [ ] Comandos de voz funcionam\n- [ ] Respostas são exibidas corretamente\n- [ ] TTS funciona (se habilitado)\n- [ ] Sem erros no console do navegador\n\n## 🎉 Exemplos de APIs Compatíveis\n\n### 🐍 Python (FastAPI)\n```python\nfrom fastapi import FastAPI\nfrom fastapi.middleware.cors import CORSMiddleware\n\napp = FastAPI()\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"https://joaomanoel123.github.io\"],\n    allow_methods=[\"GET\", \"POST\"],\n    allow_headers=[\"*\"],\n)\n\n@app.post(\"/command\")\nasync def command(request: dict):\n    message = request.get(\"message\", \"\")\n    # Processar mensagem com IA\n    reply = f\"Você disse: {message}\"\n    return {\"reply\": reply}\n\n@app.get(\"/health\")\nasync def health():\n    return {\"status\": \"ok\"}\n```\n\n### 🟨 Node.js (Express)\n```javascript\nconst express = require('express');\nconst cors = require('cors');\n\nconst app = express();\n\napp.use(cors({\n    origin: 'https://joaomanoel123.github.io'\n}));\napp.use(express.json());\n\napp.post('/command', (req, res) => {\n    const { message } = req.body;\n    // Processar mensagem com IA\n    const reply = `Você disse: ${message}`;\n    res.json({ reply });\n});\n\napp.get('/health', (req, res) => {\n    res.json({ status: 'ok' });\n});\n\napp.listen(3000);\n```\n\n## 🚀 Deploy da Sua API\n\n### 🌐 Render.com\n1. Conecte seu repositório\n2. Configure build command\n3. Configure start command\n4. Adicione variáveis de ambiente\n5. Deploy automático\n\n### ▲ Vercel\n1. Conecte GitHub\n2. Configure projeto\n3. Deploy automático\n4. Configure domínio personalizado\n\n### 🟣 Heroku\n1. Crie app no Heroku\n2. Conecte GitHub\n3. Configure buildpacks\n4. Deploy automático\n\n---\n\n## 📞 Suporte\n\n### 🆘 Precisa de Ajuda?\n\n1. **📖 Documentação**: Consulte este guia\n2. **🧪 Teste**: Use o configurador visual\n3. **🔍 Debug**: Verifique console do navegador\n4. **📝 Logs**: Analise logs da sua API\n\n### 🔧 Comandos Úteis\n\n```bash\n# Verificar configuração atual\ngrep -n \"API_URL\" www/main-github-pages.js\n\n# Testar API\ncurl https://sua-api.com/health\n\n# Ver logs do git\ngit log --oneline -5\n\n# Status do repositório\ngit status\n```\n\n---\n\n**🎯 CONFIGURAÇÃO PERSONALIZADA COMPLETA!**  \n**🔧 Use qualquer um dos 3 métodos acima**  \n**🌐 Sua API + J.A.R.V.I.S = Assistente Personalizado**  \n**👨‍💻 Desenvolvido para João Manoel**"