<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J.A.R.V.I.S - Teste Mobile</title>
    
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- Estilos originais -->
    <link rel="stylesheet" href="style.css?v=2025080520">
    <link rel="stylesheet" href="iron_man_visual_styles.css?v=2025011520">
    <link rel="stylesheet" href="google_enhanced_web_styles.css?v=2025011521">
    
    <!-- Mobile Optimizations -->
    <link rel="stylesheet" href="mobile_optimizations.css?v=2025080520">
    
    <style>
        .test-section {
            background: rgba(0, 170, 255, 0.1);
            border: 1px solid #00AAFF;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .test-result {
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }
        
        .test-pass {
            background: rgba(40, 167, 69, 0.2);
            border: 1px solid #28a745;
            color: #28a745;
        }
        
        .test-fail {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid #dc3545;
            color: #dc3545;
        }
        
        .test-info {
            background: rgba(23, 162, 184, 0.2);
            border: 1px solid #17a2b8;
            color: #17a2b8;
        }
    </style>
</head>

<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h1 class="text-center text-light mb-4">
                    <i class="bi bi-phone"></i> J.A.R.V.I.S - Teste Mobile
                </h1>
                
                <!-- Informa√ß√µes do Dispositivo -->
                <div class="test-section">
                    <h3 class="text-light">üì± Informa√ß√µes do Dispositivo</h3>
                    <div id="device-info" class="text-light"></div>
                </div>
                
                <!-- Testes de Responsividade -->
                <div class="test-section">
                    <h3 class="text-light">üìê Testes de Responsividade</h3>
                    <div id="responsive-tests"></div>
                </div>
                
                <!-- Testes de Touch -->
                <div class="test-section">
                    <h3 class="text-light">‚úã Testes de Touch</h3>
                    <div class="row">
                        <div class="col-6 col-md-3 mb-2">
                            <button class="btn btn-primary w-100 test-touch-btn" data-test="small">
                                Pequeno
                            </button>
                        </div>
                        <div class="col-6 col-md-3 mb-2">
                            <button class="btn btn-success w-100 test-touch-btn glow-on-hover" data-test="medium">
                                M√©dio
                            </button>
                        </div>
                        <div class="col-6 col-md-3 mb-2">
                            <button class="btn btn-warning w-100 test-touch-btn" data-test="large" style="min-height: 48px;">
                                Grande
                            </button>
                        </div>
                        <div class="col-6 col-md-3 mb-2">
                            <button class="btn btn-info w-100 test-touch-btn" data-test="optimal" style="min-height: 44px; min-width: 44px;">
                                √ìtimo
                            </button>
                        </div>
                    </div>
                    <div id="touch-results" class="mt-3"></div>
                </div>
                
                <!-- Teste de Input -->
                <div class="test-section">
                    <h3 class="text-light">‚å®Ô∏è Teste de Input Mobile</h3>
                    <div id="TextInput" class="d-flex mb-3">
                        <input type="text" class="input-field" id="test-input" placeholder="Digite aqui para testar...">
                        <button class="glow-on-hover" id="test-send-btn">
                            <i class="bi bi-send"></i>
                        </button>
                    </div>
                    <div id="input-results"></div>
                </div>
                
                <!-- Teste de Anima√ß√µes -->
                <div class="test-section">
                    <h3 class="text-light">üé® Teste de Anima√ß√µes</h3>
                    <div class="text-center mb-3">
                        <div class="svg-frame" style="width: 200px; height: 200px; margin: 0 auto;">
                            <svg style="--i:0; width: 200px; height: 200px;">
                                <circle cx="100" cy="100" r="80" stroke="#00AAFF" fill="none" stroke-width="2">
                                    <animate attributeName="r" values="80;90;80" dur="2s" repeatCount="indefinite"/>
                                </circle>
                                <circle cx="100" cy="100" r="60" stroke="#00AAFF" fill="none" stroke-width="1" opacity="0.7">
                                    <animate attributeName="r" values="60;70;60" dur="1.5s" repeatCount="indefinite"/>
                                </circle>
                            </svg>
                        </div>
                    </div>
                    <div id="animation-results"></div>
                </div>
                
                <!-- Teste de Performance -->
                <div class="test-section">
                    <h3 class="text-light">‚ö° Teste de Performance</h3>
                    <div id="performance-results"></div>
                </div>
                
                <!-- Teste de Gestos -->
                <div class="test-section">
                    <h3 class="text-light">üëÜ Teste de Gestos</h3>
                    <div class="alert alert-info">
                        <strong>Instru√ß√µes:</strong>
                        <ul class="mb-0">
                            <li>Swipe da esquerda para direita: Simular abertura de chat</li>
                            <li>Swipe da direita para esquerda: Simular fechamento</li>
                            <li>Toque longo: Testar feedback</li>
                        </ul>
                    </div>
                    <div id="gesture-area" style="height: 150px; background: rgba(0,170,255,0.1); border: 2px dashed #00AAFF; border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                        <span class="text-light">√Årea de Teste de Gestos</span>
                    </div>
                    <div id="gesture-results" class="mt-3"></div>
                </div>
                
                <!-- Resultados Finais -->
                <div class="test-section">
                    <h3 class="text-light">üìä Resumo dos Testes</h3>
                    <div id="final-results"></div>
                    <div class="text-center mt-3">
                        <button class="btn btn-primary" onclick="runAllTests()">
                            <i class="bi bi-arrow-clockwise"></i> Executar Todos os Testes
                        </button>
                        <a href="index.html" class="btn btn-success ms-2">
                            <i class="bi bi-house"></i> Voltar ao J.A.R.V.I.S
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="mobile_enhancements.js?v=2025080520"></script>
    
    <script>
        // Vari√°veis de teste
        let testResults = {
            device: {},
            responsive: {},
            touch: {},
            input: {},
            animation: {},
            performance: {},
            gestures: {}
        };

        // Executar testes quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            runAllTests();
        });

        function runAllTests() {
            console.log('üß™ Iniciando testes mobile do J.A.R.V.I.S...');
            
            testDeviceInfo();
            testResponsive();
            testTouch();
            testInput();
            testAnimations();
            testPerformance();
            testGestures();
            
            setTimeout(showFinalResults, 1000);
        }

        function testDeviceInfo() {
            const info = document.getElementById('device-info');
            const mobile = window.JarvisMobile;
            
            const deviceData = {
                userAgent: navigator.userAgent,
                isMobile: mobile ? mobile.isMobile : false,
                isTablet: mobile ? mobile.isTablet : false,
                isTouchDevice: mobile ? mobile.isTouchDevice : false,
                screenSize: `${window.innerWidth}x${window.innerHeight}`,
                pixelRatio: window.devicePixelRatio,
                orientation: window.innerHeight > window.innerWidth ? 'Portrait' : 'Landscape'
            };
            
            testResults.device = deviceData;
            
            info.innerHTML = `
                <div class="test-result test-info">
                    <strong>User Agent:</strong> ${deviceData.userAgent.substring(0, 100)}...
                </div>
                <div class="test-result ${deviceData.isMobile ? 'test-pass' : 'test-info'}">
                    <strong>Mobile:</strong> ${deviceData.isMobile ? '‚úÖ Sim' : '‚ùå N√£o'}
                </div>
                <div class="test-result ${deviceData.isTouchDevice ? 'test-pass' : 'test-info'}">
                    <strong>Touch:</strong> ${deviceData.isTouchDevice ? '‚úÖ Suportado' : '‚ùå N√£o suportado'}
                </div>
                <div class="test-result test-info">
                    <strong>Tela:</strong> ${deviceData.screenSize} (${deviceData.orientation})
                </div>
                <div class="test-result test-info">
                    <strong>Pixel Ratio:</strong> ${deviceData.pixelRatio}
                </div>
            `;
        }

        function testResponsive() {
            const results = document.getElementById('responsive-tests');
            const width = window.innerWidth;
            
            let breakpoint = '';
            let status = '';
            
            if (width <= 480) {
                breakpoint = 'Mobile (‚â§480px)';
                status = 'test-pass';
            } else if (width <= 768) {
                breakpoint = 'Tablet Portrait (481-768px)';
                status = 'test-pass';
            } else if (width <= 1024) {
                breakpoint = 'Tablet Landscape (769-1024px)';
                status = 'test-pass';
            } else {
                breakpoint = 'Desktop (>1024px)';
                status = 'test-info';
            }
            
            testResults.responsive = { width, breakpoint };
            
            results.innerHTML = `
                <div class="test-result ${status}">
                    <strong>Breakpoint Atual:</strong> ${breakpoint}
                </div>
                <div class="test-result test-info">
                    <strong>Largura:</strong> ${width}px
                </div>
            `;
        }

        function testTouch() {
            const buttons = document.querySelectorAll('.test-touch-btn');
            const results = document.getElementById('touch-results');
            
            buttons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const test = this.dataset.test;
                    const rect = this.getBoundingClientRect();
                    const size = `${Math.round(rect.width)}x${Math.round(rect.height)}`;
                    
                    let status = 'test-fail';
                    let message = '';
                    
                    if (rect.width >= 44 && rect.height >= 44) {
                        status = 'test-pass';
                        message = '‚úÖ Tamanho adequado para touch';
                    } else {
                        message = '‚ùå Muito pequeno para touch (m√≠n: 44x44px)';
                    }
                    
                    results.innerHTML += `
                        <div class="test-result ${status}">
                            <strong>Bot√£o ${test}:</strong> ${size} - ${message}
                        </div>
                    `;
                });
            });
        }

        function testInput() {
            const input = document.getElementById('test-input');
            const results = document.getElementById('input-results');
            
            input.addEventListener('focus', function() {
                const fontSize = window.getComputedStyle(this).fontSize;
                const fontSizeNum = parseInt(fontSize);
                
                let status = fontSizeNum >= 16 ? 'test-pass' : 'test-fail';
                let message = fontSizeNum >= 16 ? '‚úÖ Fonte adequada (n√£o causa zoom)' : '‚ùå Fonte muito pequena (pode causar zoom)';
                
                results.innerHTML = `
                    <div class="test-result ${status}">
                        <strong>Tamanho da Fonte:</strong> ${fontSize} - ${message}
                    </div>
                `;
            });
        }

        function testAnimations() {
            const results = document.getElementById('animation-results');
            const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            
            results.innerHTML = `
                <div class="test-result ${prefersReduced ? 'test-info' : 'test-pass'}">
                    <strong>Prefer√™ncia de Movimento:</strong> ${prefersReduced ? 'üîÑ Reduzido' : '‚úÖ Normal'}
                </div>
                <div class="test-result test-pass">
                    <strong>Anima√ß√£o SVG:</strong> ‚úÖ Funcionando
                </div>
            `;
        }

        function testPerformance() {
            const results = document.getElementById('performance-results');
            
            if ('performance' in window) {
                const perfData = performance.getEntriesByType('navigation')[0];
                const loadTime = Math.round(perfData.loadEventEnd - perfData.loadEventStart);
                
                let status = loadTime < 3000 ? 'test-pass' : 'test-fail';
                let message = loadTime < 3000 ? '‚úÖ Carregamento r√°pido' : '‚ùå Carregamento lento';
                
                results.innerHTML = `
                    <div class="test-result ${status}">
                        <strong>Tempo de Carregamento:</strong> ${loadTime}ms - ${message}
                    </div>
                    <div class="test-result test-info">
                        <strong>Mem√≥ria Usada:</strong> ${(performance.memory ? Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) : 'N/A')}MB
                    </div>
                `;
            } else {
                results.innerHTML = `
                    <div class="test-result test-info">
                        <strong>Performance API:</strong> ‚ùå N√£o dispon√≠vel
                    </div>
                `;
            }
        }

        function testGestures() {
            const gestureArea = document.getElementById('gesture-area');
            const results = document.getElementById('gesture-results');
            let startX, startY, startTime;
            
            gestureArea.addEventListener('touchstart', function(e) {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                startTime = Date.now();
            });
            
            gestureArea.addEventListener('touchend', function(e) {
                const endX = e.changedTouches[0].clientX;
                const endY = e.changedTouches[0].clientY;
                const endTime = Date.now();
                
                const diffX = endX - startX;
                const diffY = endY - startY;
                const duration = endTime - startTime;
                
                let gesture = '';
                if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
                    gesture = diffX > 0 ? 'Swipe Direita' : 'Swipe Esquerda';
                } else if (Math.abs(diffY) > 50) {
                    gesture = diffY > 0 ? 'Swipe Baixo' : 'Swipe Cima';
                } else if (duration > 500) {
                    gesture = 'Toque Longo';
                } else {
                    gesture = 'Toque Simples';
                }
                
                results.innerHTML += `
                    <div class="test-result test-pass">
                        <strong>Gesto Detectado:</strong> ${gesture} (${Math.round(Math.abs(diffX))}px, ${duration}ms)
                    </div>
                `;
            });
        }

        function showFinalResults() {
            const finalResults = document.getElementById('final-results');
            const mobile = window.JarvisMobile;
            
            let score = 0;
            let total = 0;
            
            // Calcular pontua√ß√£o
            if (mobile && mobile.isMobile) score += 2;
            total += 2;
            
            if (window.innerWidth <= 768) score += 1;
            total += 1;
            
            if ('ontouchstart' in window) score += 1;
            total += 1;
            
            const percentage = Math.round((score / total) * 100);
            let status = percentage >= 75 ? 'test-pass' : percentage >= 50 ? 'test-info' : 'test-fail';
            
            finalResults.innerHTML = `
                <div class="test-result ${status}">
                    <strong>Pontua√ß√£o Mobile:</strong> ${score}/${total} (${percentage}%)
                </div>
                <div class="test-result test-info">
                    <strong>Recomenda√ß√£o:</strong> ${percentage >= 75 ? '‚úÖ Experi√™ncia mobile otimizada' : percentage >= 50 ? '‚ö†Ô∏è Experi√™ncia mobile adequada' : '‚ùå Necessita melhorias'}
                </div>
            `;
        }
    </script>
</body>
</html>