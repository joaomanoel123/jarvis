/**\n * Jarvis Configuration Module\n * ConfiguraÃ§Ãµes centralizadas para o assistente Jarvis\n * CompatÃ­vel com GitHub Pages e desenvolvimento local\n */\n\nclass JarvisConfig {\n    constructor() {\n        this.isGitHubPages = window.location.hostname.includes('github.io');\n        this.isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\n        this.isHTTPS = window.location.protocol === 'https:';\n        \n        // URLs da API - CONFIGURE AQUI A URL CORRETA\n        this.API_URLS = {\n            production: 'https://jarvis-api.onrender.com', // URL baseada no render.yaml\n            development: 'http://localhost:8000',\n            fallback: 'https://jarvis-api-joao-manoel.onrender.com' // URL alternativa\n        };\n        \n        this.settings = {\n            // ConfiguraÃ§Ãµes de API\n            apiTimeout: 45000, // 45 segundos para cold start do Render\n            maxRetries: 3,\n            retryDelay: 2000,\n            \n            // ConfiguraÃ§Ãµes de voz\n            speechRecognition: {\n                language: 'pt-BR',\n                continuous: false,\n                interimResults: true,\n                timeout: 10000\n            },\n            \n            // ConfiguraÃ§Ãµes de TTS\n            textToSpeech: {\n                rate: 1.0,\n                pitch: 1.0,\n                volume: 0.8,\n                autoSpeak: true\n            },\n            \n            // ConfiguraÃ§Ãµes de interface\n            ui: {\n                animationDuration: 1000,\n                messageDisplayTime: 5000,\n                autoHideLoader: true\n            }\n        };\n        \n        this.init();\n    }\n    \n    init() {\n        console.log('âš™ï¸ Inicializando configuraÃ§Ãµes do Jarvis...');\n        console.log('ğŸŒ Ambiente:', this.getEnvironment());\n        console.log('ğŸ”— URL da API:', this.getApiUrl());\n        console.log('ğŸ”’ HTTPS:', this.isHTTPS ? 'âœ…' : 'âŒ');\n        \n        // Carregar configuraÃ§Ãµes salvas\n        this.loadSavedSettings();\n        \n        // Tornar disponÃ­vel globalmente\n        window.jarvisConfig = this;\n    }\n    \n    getEnvironment() {\n        if (this.isGitHubPages) return 'GitHub Pages';\n        if (this.isLocalhost) return 'Local Development';\n        return 'Production';\n    }\n    \n    getApiUrl() {\n        // Verificar se hÃ¡ URL personalizada salva\n        const customUrl = localStorage.getItem('JARVIS_API_URL');\n        if (customUrl && customUrl.trim()) {\n            return customUrl.trim();\n        }\n        \n        // Usar URL baseada no ambiente\n        if (this.isLocalhost) {\n            return this.API_URLS.development;\n        }\n        \n        return this.API_URLS.production;\n    }\n    \n    setApiUrl(url) {\n        if (!url || !url.trim()) {\n            localStorage.removeItem('JARVIS_API_URL');\n            console.log('ğŸ”„ URL da API resetada para padrÃ£o');\n        } else {\n            localStorage.setItem('JARVIS_API_URL', url.trim());\n            console.log('ğŸ’¾ URL da API salva:', url.trim());\n        }\n    }\n    \n    loadSavedSettings() {\n        try {\n            const saved = localStorage.getItem('JARVIS_SETTINGS');\n            if (saved) {\n                const parsedSettings = JSON.parse(saved);\n                this.settings = { ...this.settings, ...parsedSettings };\n                console.log('âš™ï¸ ConfiguraÃ§Ãµes carregadas do localStorage');\n            }\n        } catch (error) {\n            console.warn('âš ï¸ Erro ao carregar configuraÃ§Ãµes:', error);\n        }\n    }\n    \n    saveSettings() {\n        try {\n            localStorage.setItem('JARVIS_SETTINGS', JSON.stringify(this.settings));\n            console.log('ğŸ’¾ ConfiguraÃ§Ãµes salvas');\n        } catch (error) {\n            console.warn('âš ï¸ Erro ao salvar configuraÃ§Ãµes:', error);\n        }\n    }\n    \n    // MÃ©todos de configuraÃ§Ã£o especÃ­ficos\n    setSpeechLanguage(language) {\n        this.settings.speechRecognition.language = language;\n        this.saveSettings();\n        console.log('ğŸŒ Idioma de reconhecimento alterado para:', language);\n    }\n    \n    setTTSSettings(rate, pitch, volume) {\n        this.settings.textToSpeech.rate = rate || this.settings.textToSpeech.rate;\n        this.settings.textToSpeech.pitch = pitch || this.settings.textToSpeech.pitch;\n        this.settings.textToSpeech.volume = volume || this.settings.textToSpeech.volume;\n        this.saveSettings();\n        console.log('ğŸ”Š ConfiguraÃ§Ãµes TTS atualizadas');\n    }\n    \n    // DiagnÃ³stico do sistema\n    async diagnose() {\n        console.log('ğŸ” Executando diagnÃ³stico completo...');\n        \n        const diagnosis = {\n            environment: this.getEnvironment(),\n            apiUrl: this.getApiUrl(),\n            isHTTPS: this.isHTTPS,\n            speechRecognitionSupported: 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window,\n            speechSynthesisSupported: 'speechSynthesis' in window,\n            userAgent: navigator.userAgent,\n            language: navigator.language,\n            onLine: navigator.onLine,\n            cookiesEnabled: navigator.cookieEnabled,\n            timestamp: new Date().toISOString()\n        };\n        \n        // Testar conectividade com a API\n        try {\n            const response = await fetch(this.getApiUrl() + '/health', {\n                method: 'GET',\n                timeout: 10000\n            });\n            diagnosis.apiConnectivity = response.ok;\n            diagnosis.apiStatus = response.status;\n        } catch (error) {\n            diagnosis.apiConnectivity = false;\n            diagnosis.apiError = error.message;\n        }\n        \n        console.log('ğŸ“Š DiagnÃ³stico completo:', diagnosis);\n        return diagnosis;\n    }\n    \n    // ConfiguraÃ§Ãµes rÃ¡pidas\n    showQuickSettings() {\n        const options = [\n            'ğŸ”§ Configurar URL da API',\n            'ğŸŒ Alterar idioma de reconhecimento',\n            'ğŸ”Š ConfiguraÃ§Ãµes de voz',\n            'ğŸ§ª Testar conectividade',\n            'ğŸ“Š Executar diagnÃ³stico',\n            'ğŸ”„ Resetar configuraÃ§Ãµes',\n            'âŒ Cancelar'\n        ];\n        \n        const choice = prompt(`ConfiguraÃ§Ãµes RÃ¡pidas do Jarvis:\\\n\\\n${options.map((opt, i) => `${i + 1}. ${opt}`).join('\\\n')}\\\n\\\nEscolha uma opÃ§Ã£o (1-${options.length}):`);\n        \n        switch(choice) {\n            case '1':\n                this.configureApiUrl();\n                break;\n            case '2':\n                this.configureLanguage();\n                break;\n            case '3':\n                this.configureTTS();\n                break;\n            case '4':\n                this.testConnectivity();\n                break;\n            case '5':\n                this.showDiagnosis();\n                break;\n            case '6':\n                this.resetSettings();\n                break;\n        }\n    }\n    \n    configureApiUrl() {\n        const current = this.getApiUrl();\n        const newUrl = prompt(`URL da API do Jarvis:\\\n\\\nAtual: ${current}\\\n\\\nDigite a nova URL ou deixe vazio para usar padrÃ£o:`, current);\n        \n        if (newUrl !== null) {\n            this.setApiUrl(newUrl);\n            alert(`âœ… URL configurada: ${this.getApiUrl()}`);\n        }\n    }\n    \n    configureLanguage() {\n        const languages = [\n            'pt-BR - PortuguÃªs (Brasil)',\n            'pt-PT - PortuguÃªs (Portugal)',\n            'en-US - English (US)',\n            'en-GB - English (UK)',\n            'es-ES - EspaÃ±ol',\n            'fr-FR - FranÃ§ais'\n        ];\n        \n        const choice = prompt(`Idioma de reconhecimento:\\\n\\\n${languages.map((lang, i) => `${i + 1}. ${lang}`).join('\\\n')}\\\n\\\nEscolha (1-${languages.length}):`);\n        \n        const langCodes = ['pt-BR', 'pt-PT', 'en-US', 'en-GB', 'es-ES', 'fr-FR'];\n        const index = parseInt(choice) - 1;\n        \n        if (index >= 0 && index < langCodes.length) {\n            this.setSpeechLanguage(langCodes[index]);\n            alert(`âœ… Idioma alterado para: ${languages[index]}`);\n        }\n    }\n    \n    configureTTS() {\n        const rate = prompt('Velocidade da fala (0.1 - 2.0):', this.settings.textToSpeech.rate);\n        const pitch = prompt('Tom da voz (0.0 - 2.0):', this.settings.textToSpeech.pitch);\n        const volume = prompt('Volume (0.0 - 1.0):', this.settings.textToSpeech.volume);\n        \n        this.setTTSSettings(\n            parseFloat(rate) || this.settings.textToSpeech.rate,\n            parseFloat(pitch) || this.settings.textToSpeech.pitch,\n            parseFloat(volume) || this.settings.textToSpeech.volume\n        );\n        \n        alert('âœ… ConfiguraÃ§Ãµes de voz atualizadas!');\n    }\n    \n    async testConnectivity() {\n        const apiUrl = this.getApiUrl();\n        \n        try {\n            const response = await fetch(apiUrl + '/health', {\n                method: 'GET',\n                timeout: 10000\n            });\n            \n            if (response.ok) {\n                const data = await response.json();\n                alert(`âœ… Conectividade OK!\\\n\\\nStatus: ${data.status}\\\nAPI: ${data.api_provider}\\\nConfigurada: ${data.api_configured}`);\n            } else {\n                alert(`âŒ Erro de conectividade!\\\n\\\nStatus: ${response.status}\\\nURL: ${apiUrl}`);\n            }\n        } catch (error) {\n            alert(`âŒ Falha na conectividade!\\\n\\\nErro: ${error.message}\\\nURL: ${apiUrl}`);\n        }\n    }\n    \n    async showDiagnosis() {\n        const diagnosis = await this.diagnose();\n        \n        const report = `ğŸ” DiagnÃ³stico do Sistema Jarvis\\\n\\\n` +\n            `ğŸŒ Ambiente: ${diagnosis.environment}\\\n` +\n            `ğŸ”— API: ${diagnosis.apiUrl}\\\n` +\n            `ğŸ“¡ Conectividade: ${diagnosis.apiConnectivity ? 'âœ…' : 'âŒ'}\\\n` +\n            `ğŸ”’ HTTPS: ${diagnosis.isHTTPS ? 'âœ…' : 'âŒ'}\\\n` +\n            `ğŸ¤ Speech Recognition: ${diagnosis.speechRecognitionSupported ? 'âœ…' : 'âŒ'}\\\n` +\n            `ğŸ”Š Text-to-Speech: ${diagnosis.speechSynthesisSupported ? 'âœ…' : 'âŒ'}\\\n` +\n            `ğŸŒ Idioma: ${diagnosis.language}\\\n` +\n            `ğŸ“¶ Online: ${diagnosis.onLine ? 'âœ…' : 'âŒ'}`;\n        \n        alert(report);\n    }\n    \n    resetSettings() {\n        if (confirm('ğŸ”„ Resetar todas as configuraÃ§Ãµes para o padrÃ£o?')) {\n            localStorage.removeItem('JARVIS_SETTINGS');\n            localStorage.removeItem('JARVIS_API_URL');\n            location.reload();\n        }\n    }\n}\n\n// Inicializar configuraÃ§Ãµes quando o documento estiver pronto\n$(document).ready(function() {\n    window.jarvisConfig = new JarvisConfig();\n    console.log('âš™ï¸ Jarvis Config inicializado!');\n});\n\n// Exportar para uso em outros scripts\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = JarvisConfig;\n}"